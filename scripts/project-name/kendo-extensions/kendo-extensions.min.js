(function(n){function t(n){function i(n){var i=$(n).find("[requiredGrid]").toArray(),t=!0;return i.length>0&&(typeof i=="object"?i.forEach(function(n){n=$(n).data("kendoGrid");console.log("grid data",n.dataSource.data());console.log("grid total",n.dataSource.total());t=n.dataSource.total()>0}):t=grid.dataSource.total()>0),console.log("required grid",t),t}function r(n,t){if(n.length)for(var i=0;i<n[0].attributes.length;i++)if(n[0].attributes[i].name===t)return!0}var t;return this.options={validateOnBlur:!1,rules:{required:function(n){var t,i;if(n.is("[required]")&&!n.is(".ng-hide")&&!n.closest("div").hasClass("ng-hide")){if(console.log("ctrl in",n.closest("div")),n.is("[kendo-combo-box]")||n.is("[data-kendo-combo-box]"))return(t=n.data("kendoComboBox"),t.selectedIndex>-1)?!0:t.value()!==""&&t.value()!==null&&t.value()!==undefined?!0:!1;if(n.is("[kendo-drop-down-list]")||n.is("[data-kendo-drop-down-list]")){if(console.log("eto yun e"),t=n.data("kendoDropDownList"),t.options.optionLabel!==""||t.options.optionLabel!==undefined){if(t.selectedIndex>0||t.value()!==""&&t.value()!==null&&t.value()!==undefined)return!0}else if(t.selectedIndex>-1||t.value()!==""&&t.value()!==null&&t.value()!==undefined)return!0;return!1}return n.is("[kendo-upload]")||n.is("[data-kendo-upload]")?(t=n.data("kendoUpload"),t.options.files.length>0):n.is("[data-kendo-multi-select]")||n.is("[kendo-multi-select]")?(t=n.data("kendoMultiSelect"),t.listView._dataItems.length>0):n.is("[data-kendo-editor]")||n.is("[kendo-editor]")?(t=n.data("kendoEditor"),i=(new DOMParser).parseFromString(t.value(),"text/html").documentElement.textContent,i.trim().replace(/ /g,"")!==""&&t.value()!==null&&t.value()!==undefined):(console.log("value",n[0].value),n[0].value!==undefined&&n[0].value!==null&&n[0].value.trim()!=="")}return!0},notZero:function(n){if(n.is("[notZero]")&&!n.is(".ng-hide")){var t=parseFloat(n[0].value,10);return t!==0}return!0},validateDate:function(n){var t,i;if(n.is("[kendo-date-picker]")){if(n[0].value!==undefined&&n[0].value!==null&&n[0].value!=="")return t=n.data("kendoDatePicker"),i=t.options.format,i!==null&&i!==undefined?angular.isDate(kendo.parseDate(t.value(),i)):angular.isDate(t.value())}else if(n.is("[kendo-date-time-picker]")&&n[0].value!==undefined&&n[0].value!==null&&n[0].value!=="")return t=n.data("kendoDateTimePicker"),i=t.options.format,i!==null&&i!==undefined?angular.isDate(kendo.parseDate(t.value(),i)):angular.isDate(t.value());return!0},compareDate:function(n){var u,t,i,f,e,o;if(n.is("[kendo-date-picker]")&&r(n,"comparedate")){if(u=n.attr("compareDate"),t=new Date(u),!angular.isDate(t)||isNaN(t)){if(i=$(this.element).find('[kendo-date-picker="'+u+'"]'),(i===null||i===undefined)&&(i=$(this.element).siblings().find('[kendo-date-picker="'+u+'"]'),i===null||i===undefined))return console.error("No matching compare date ["+u+"] found for ",n),!0;f=i.data("kendoDatePicker");f=f.value();angular.isDate(f)&&!isNaN(f)&&(t=f)}if(angular.isDate(t)){if(e=n.data("kendoDatePicker"),e.value()!==null&&e.value()!==undefined)return o=e.options.format,o!==null&&o!==undefined&&(t=kendo.parseDate(t,o)),!(t>e.value())}else console.error("Invalid value compareDate ["+u+"] for ",n)}return!0},serverValidate:function(n){if(n.is("[serverValidate]")&&!n.is(".ng-hide")){var t=$(n).attr("serverValidate");return t==="false"?!1:!0}return!0},maximumlength:function(n){if(n.is("[maximumlength]")&&!n.is(".ng-hide")){var t=n.attr("maximumlength");return n[0].value.length<=t}return!0}},messages:{required:function(n){return t=n.is("[kendo-combo-box]")||n.is("[kendo-drop-down-list]")?"Please select from the required option.":n.is("[kendo-upload]")?"Please upload a file.":"Please fill in required field(s).",console.log("ctrl error",n),console.log("ctrl mes",t),t},notZero:function(){return t="Field must not be in zero value."},validateDate:function(){return t="Dates entered may be invalid or in wrong format."},compareDate:function(){return t="Dates must not be lower than its relative date."},serverValidate:function(n){t="";var i=$(n).attr("serverErrorType");switch(i){case"TransactionPostedAllPayouts":t="Payment mode has previous payout to be posted.";break;case"RemittanceNoPostedTransaction":t="Selected Month Year for remittance has no posted payout."}return t},maximumlength:function(n){return t="You have reached the maximum "+n.attr("maximumlength")+" characters."}},validate:function(n){var u,f,r;if(console.log("got the feeling",this),console.log("got the feeling 2",jQuery.unique(this.errors())),u=this.errors(),console.log("errorMessages",u),f=!0,f=i(n.sender.element),f||u.push("Required grid must have at least 1 item."),this.hideMessages(),n.valid){if(f)return!0;n.valid=!1}console.log("for the first time",n.valid);n.valid||(console.log("for the first time 2",jQuery.unique(u)),console.log("for the first time 3",t),r=jQuery.unique(u),r.length>0?(console.log("for the first time 4"),t!==null||t!==undefined||t!==""?(console.log("for the first time 5"),errorNotification(t,"")):(console.log("for the first time 6"),errorNotification(r[0],""))):r!==null||r!==undefined?(console.log("for the first time 7"),t!==null||t!==undefined||t!==""?(console.log("for the first time 8"),errorNotification(t,"")):(console.log("for the first time 9"),errorNotification(r,""))):(console.log("for the first time 10"),errorNotification(t,"")))}},n.kendoValidator(this.options).data("kendoValidator")}recruitment.CValidator=t;n.directive("formValidation",[function(){return{restrict:"A",scope:!1,link:function(n,t,i){var r=new recruitment.CValidator(t);i.formValidation!==""?n[i.formValidation]=r:n.formValidator=r}}}])})(app),function(){function n(n){var s,e,r,c,o,u,l;for(s in n)this[s]=n[s];if(this.pageSize=10,n.pageSize!==undefined&&(this.pageSize=n.pageSize),this.type="aspnetmvc-ajax",n.type!==undefined&&(this.type=n.type),n.group!==undefined&&(this.group=n.group),this.controller="/",this.serverFiltering=n.serverFiltering!=null&&n.serverFiltering!=undefined?n.serverFiltering:!0,this.requestEnd=n.requestEnd!=undefined?n.requestEnd:function(t){t.type==="destroy"||t.type==="create"?this.read():this.requestEnd=n.requestEnd},this.serverPaging=n.serverPaging!=null&&n.serverPaging!=undefined?n.serverPaging:!0,this.serverSorting=n.serverSorting!=null&&n.serverSorting!=undefined?n.serverSorting:!0,this.error=function(n){if(console.log("error",n),n.xhr!==null||n.xhr===undefined){var i=n.xhr,t=angular.fromJson(i.responseText);if(t.Type==="Recruitment.RecruitmentException.NotAuthorizeExecutionException")return;errorNotification(t,"")}else errorNotification("An unknown error has occured","")},n.data==undefined?this.transport={read:{type:"GET"},create:{},update:{},destroy:{type:"DELETE"},read:function(){},parameterMap:function(t,i){var u,f,e,c,l,s;if(this.type!=="aspnetmvc-ajax"){if(u=angular.copy(t),i==="destroy")return u.UID;if(i!=="read")return n!==undefined&&n.beforeSend!==undefined&&n.beforeSend(u),JSON.stringify(u);var r=u.filter,h=u.sort,o={};if(typeof this.options.read.url=="string")o=url.parse(this.options.read.url);else if(typeof this.options.read.url=="function")o=url.parse(this.options.read.url());else throw"Not a valid this.options.read.url type";if(f={},o.queryString.filter!==undefined&&(f=JSON.parse(o.queryString.filter)),r!==undefined){if(r.filters!==undefined&&r.filters[0]!==undefined)if(r.filters[0].field==="search")f.search=r.filters[0].value;else for(e=0;e<r.filters.length;e++)c=r.filters[e].field,l=r.filters[e].value,f[c]=l;r.field!==undefined&&r.field==="search"&&(f.search=r.value)}return s=JSON.stringify(f),s!=="{}"&&(u.filter=s),h!==undefined&&(u.sort=JSON.stringify(h[0])),u}return JSON.stringify(t)}}:this.data=n.data,this.schema=this.type==="aspnetmvc-ajax"?{data:"Data",total:"Total",errors:"Errors"}:{total:"Total",errors:function(){},data:"Data",parse:function(n){var t,i;if(console.log("parse called 2",n),n.Total!==undefined){if(t=[],t.Total=n.Total,n.Data!==undefined&&n.Data!==null)for(i=0;i<n.Data.length;i++)t.push(n.Data[i]);return t}return n=repositoryParseResult(n),n.Total=n.length,n}},n!==undefined&&n!==null){var i=new recruitment.repository,t=new recruitment.repository,h=new recruitment.repository,f=new recruitment.repository;n.schema!==undefined&&n.schema!==null&&n.schema.model!==undefined&&n.schema.model!==null&&(this.schema.model=n.schema.model.kendoModel!==undefined&&n.schema.model.kendoModel!==null?n.schema.model.kendoModel:n.schema.model);n.transport!==undefined&&n.transport!==null&&(n.transport.autoSync!==undefined&&(this.transport.autoSync=n.transport.autoSync),n.transport.read!==undefined&&n.transport.read!==null&&(typeof n.transport.read=="string"||n.transport.read instanceof String||typeof n.transport.read=="function"?this.transport.read=n.transport.read:n.transport.read.url!==undefined&&(this.transport.read.url=n.transport.read.url)),n.transport.create!==undefined&&n.transport.create!==null&&(typeof n.transport.create=="string"||n.transport.create instanceof String||typeof n.transport.create=="function"?this.transport.create=n.transport.create:n.transport.create.url!==undefined&&(this.transport.create.url=n.transport.create.url)),n.transport.update!==undefined&&n.transport.update!==null?typeof n.transport.update=="string"||n.transport.update instanceof String||typeof n.transport.update=="function"?this.transport.update=n.transport.update:n.transport.update.url!==undefined&&(this.transport.update.url=n.transport.update.url):(e=new RegExp(recruitmentConfig.VirtualPath+"/[a-zA-Z][a-zA-Z0-9]+","i"),r="",typeof this.transport.read=="string"?r=this.transport.read:typeof this.transport.read.url=="string"?r=this.transport.read.url:typeof this.transport.read.url=="function"&&(r=this.transport.read.url()),(c=e.exec(r))!==null&&(c.index===e.lastIndex&&e.lastIndex++,this.transport.update.url=c[0])),n.transport.destroy!==undefined&&n.transport.destroy!==null?typeof n.transport.destroy=="string"||n.transport.destroy instanceof String||typeof n.transport.destroy=="function"?this.transport.destroy=n.transport.destroy:n.transport.destroy.url!==undefined&&(this.transport.destroy.url=n.transport.destroy.url):(o=new RegExp(recruitmentConfig.VirtualPath+"/[a-zA-Z][a-zA-Z0-9]+","i"),u="",typeof this.transport.read=="string"?u=this.transport.read:typeof this.transport.read.url=="string"?u=this.transport.read.url:typeof this.transport.read.url=="function"&&(u=this.transport.url()),(l=o.exec(u))!==null&&(l.index===o.lastIndex&&o.lastIndex++,this.transport.destroy.url=function(){var n=this.data;return this.data=null,l[0]+"/"+n})));n.repository!==undefined&&n.repository!==null&&n.repository.controller!==undefined&&n.repository.controller!==null&&(this.controller=n.repository.controller,n.repository.action!==undefined&&n.repository.action!==null&&(n.repository.action.read!==undefined&&n.repository.action.read!==null&&(t.controller(n.repository.controller),t.action(n.repository.action.read),t.param(n.repository.param),t.includeQS(n.repository.includeQS),t.queryString(n.repository.queryString),t.filter(n.repository.filter),t.sort(n.repository.sort),this.transport.read.url=t.url),n.repository.action.create!==undefined&&n.repository.action.create!==null&&(i.controller(n.repository.controller),i.action(n.repository.action.create),i.param(n.repository.param),i.includeQS(n.repository.includeQS),i.queryString(n.repository.queryString),i.filter(n.repository.filter),this.transport.create.url=i.url),n.repository.action.update!==undefined&&n.repository.action.update!==null&&(h.controller(n.repository.controller),h.action(n.repository.action.update),this.transport.update.url=h.url),(n.repository.action.delete!==undefined&&n.repository.action.delete!==null||n.repository.action.destroy!==undefined&&n.repository.action.destroy!==null)&&(f.controller(n.repository.controller),n.repository.action.delete!==undefined&&n.repository.action.delete!==null&&f.action(n.repository.action.delete),n.repository.action.destroy!==undefined&&n.repository.action.destroy!==null&&f.action(n.repository.action.destroy),this.transport.destroy.url=function(){var t=this.data,n;return this.data=null,n=angular.copy(f),n.param(t).url})));n.change!==undefined&&n.change!==null&&(this.change=n.change);n.parameterMap!==undefined&&n.parameterMap!==null&&(this.transport.parameterMap=n.parameterMap)}}recruitment.CDataSource=n}(recruitment),function(){var n={show:function(n,t,i){var u,r;($("#errorNotif").data("kendoNotification")===undefined||$("#errorNotif").data("kendoNotification")===null)&&$("#errorNotif").kendoNotification({autoHideAfter:5e3,hideOnClick:!1,position:{bottom:20,right:20},templates:[{type:"error",template:'<div data-notify="container" class="column is-one-quarter alert alert-danger alert-with-icon animated fadeInDown" role="alert" data-notify-position="bottom-right"><button type="button" aria-hidden="true" class="close" data-notify="dismiss"><i class="material-icons md-18">close<\/i><\/button><i data-notify="icon" class="material-icons">error<\/i>#= customMsg#<\/div>'}]});u=$("#errorNotif").data("kendoNotification");i===!0&&(u.options.autoHideAfter=5e3);r="";t=t===undefined?"":t;typeof n=="object"?(r='<ul style="list-style-type: none; padding: 0; margin: 0;">',n.forEach(function(n){r+='<span data-notify="message" class="is-size-6">'+n+"<\/span><\/li>"}),r+="<\/ul>"):r='<span data-notify="title" class="is-size-6 has-text-weight-semibold">'+t+'<\/span><span data-notify="message" class="is-size-6">'+n+"<\/span><\/li>";u.hide();u.error({customMsg:r})},hide:function(){if($("#errorNotif").data("kendoNotification")!==undefined&&$("#errorNotif").data("kendoNotification")!==null){var n=$("#errorNotif").data("kendoNotification");n.hide()}}};window.errorNotification=n}(),function(){var n={show:function(n,t,i){var u,r;($("#successNotif").data("kendoNotification")===undefined||$("#successNotif").data("kendoNotification")===null)&&$("#successNotif").kendoNotification({autoHideAfter:5e3,hideOnClick:!0,position:{bottom:20,right:20},templates:[{type:"success",template:'<div data-notify="container" class="column is-one-quarter alert alert-success alert-with-icon animated fadeInDown" role="alert" data-notify-position="bottom-right"><button type="button" aria-hidden="true" class="close" data-notify="dismiss"><i class="material-icons md-18">close<\/i><\/button><i data-notify="icon" class="material-icons">check_circle<\/i>#= customMsg#<\/div>'}]});u=$("#successNotif").data("kendoNotification");i===!0&&(u.options.autoHideAfter=5e3);r="";t=t===undefined?"":t;typeof n=="object"?(r='<ul style="list-style-type: none; padding: 0; margin: 0;">',n.forEach(function(n){r+='<span data-notify="message" class="is-size-6">'+n+"<\/span><\/li>"}),r+="<\/ul>"):r='<span data-notify="title" class="is-size-6 has-text-weight-semibold">'+t+'<\/span><span data-notify="message" class="is-size-6">'+n+"<\/span><\/li>";u.hide();u.success({customMsg:r})},hide:function(){if($("#successNotif").data("kendoNotification")!==undefined&&$("#successNotif").data("kendoNotification")!==null){var n=$("#successNotif").data("kendoNotification");n.hide()}}};window.successNotification=n}(),function(){var n={show:function(n,t,i){var u,r;($("#warningNotif").data("kendoNotification")===undefined||$("#warningNotif").data("kendoNotification")===null)&&$("#warningNotif").kendoNotification({autoHideAfter:5e3,hideOnClick:!0,position:{bottom:20,right:20},templates:[{type:"warning",template:'<div data-notify="container" class="column is-one-quarter alert alert-warning alert-with-icon animated fadeInDown" role="alert" data-notify-position="bottom-right"><button type="button" aria-hidden="true" class="close" data-notify="dismiss"><i class="material-icons md-18">close<\/i><\/button><i data-notify="icon" class="material-icons">notifications<\/i>#= customMsg#<\/div>'}]});u=$("#warningNotif").data("kendoNotification");i===!0&&(u.options.autoHideAfter=5e3);r="";t=t===undefined?"":t;typeof n=="object"?(r='<ul style="list-style-type: none; padding: 0; margin: 0;">',n.forEach(function(n){r+='<span data-notify="message" class="is-size-6">'+n+"<\/span><\/li>"}),r+="<\/ul>"):r='<span data-notify="title" class="is-size-6 has-text-weight-semibold">'+t+'<\/span><span data-notify="message" class="is-size-6">'+n+"<\/span><\/li>";u.hide();u.warning({customMsg:r})},hide:function(){if($("#warningNotif").data("kendoNotification")!==undefined&&$("#warningNotif").data("kendoNotification")!==null){var n=$("#warningNotif").data("kendoNotification");n.hide()}}};window.warningNotification=n}(),function(){app.directive("grdSearch",[function(){return{restrict:"A",require:"^kendoGrid",scope:{filter:"&"},replace:!0,template:kendo.template($("#grdSearchTemplate").html()),link:function(n,t,i){n.kendoGrid=angular.element(t).closest(".k-grid").data("kendoGrid");n.placeHolder=i.placeholder;n.history="";n.searchInput="";n.onKeyPress=function(t){t.keyCode===13&&(t.preventDefault(),n.OnGoClick())};n.$parent[i.grdSearch]={filter:function(){if(n.kendoGrid!==undefined){var t={field:"search",value:n.searchInput.trim()};n.filter({e:t});n.kendoGrid.dataSource.filter(t)}}};n.OnGoClick=function(){var t,i;n.searchInput.trim()!==n.history&&(n.searchInput.trim()!==""||n.history!=="")&&(t=n.searchInput.trim(),n.history=t,n.kendoGrid!==undefined&&(i={field:"search",value:t},n.kendoGrid.filterValue=t,n.kendoGrid.clearFilter=function(){n.searchInput="";n.$apply()},n.filter({e:i}),n.kendoGrid.dataSource.filter(i)))}}}}])}(recruitment),function(){function n(n){function h(t,r){function s(n){if(console.log("elm",n),n.selectedIndex==-1&&c){var i=y(n,t.model);console.log("itemName",i);i!==undefined}}var u=[],c=!t.model.isNew(),l=$(t.container).find("input, [kendo-combo-box], [kendo-drop-down-list]").toArray(),f,o,e,h;if(l.forEach(function(n){if($(n).is("[kendo-combo-box]")||$(n).is("[kendo-drop-down-list]")){var i=$(n).data("kendoComboBox")||$(n).data("kendoDropDownList");i.dataSource.data().length==0&&u.push(i)}$(n).change(function(){t.model.set("IsDirty",Guid.NewGuid())})}),u.length>0&&(f=0,o=r===undefined||r===null?$("a.k-grid-update"):r,u.forEach(function(t){t.options.cascadeFrom===""||t.options.cascadeFrom===undefined?$.when(t.dataSource.read()).done(function(){if(++f,f===u.length){if(n!==undefined&&n.editorSettings!==undefined&&n.editorSettings.optionOpenByDefault){var r=u[0];r.open()}i.enable(o)}s(t)}):t.bind("dataBound",s)})),e=t.container.data("kendoWindow"),e!==undefined)e.one("close",function(){console.log("formContainer",t.sender.dataSource);iziToast.destroy()});else h=$("a.k-grid-cancel.k-button"),h!==undefined&&iziToast.destroy()}function y(n,t){var u=$(n.element).attr("k-ng-model"),i,r;return u!==undefined?(i=$(n.element).attr("k-ng-model").split("."),r=i.length>0?i[1]:i[0],t[r]!==undefined)?t[r][n.options.dataTextField]:undefined:"Item"}var e,o,r,c,u,t,f,i;if(n!==undefined){for(e in n)this[e]=n[e];if(this.pageable=!0,this.sortable=n.sortable==undefined||n.sortable==null?!0:n.sortable,this.selectable=!0,this.navigatable=!0,this.autoBind=n.autoBind!==undefined?n.autoBind:!0,this.reorderable=!0,this.resizable=!0,this.noRecords=!0,this.noRecords={template:'<div class="k-grid-norecords ng-scope"><div class="k-grid-norecords-template" style="text-align:center;">No Entry Found<\/div><\/div>'},this.excel={allPages:!0,filterable:!1},n.excel!=null&&n.excel!==undefined&&n.excel.fileName!=null&&n.excel.fileName!==undefined&&(this.excel.fileName=n.excel.fileName),this.excelExport=n.excelExport!=null&&n.excelExport!==undefined?n.excelExport:function(n){for(var f,i,u,r=n.workbook.sheets[0],t=0;t<r.columns.length;t++)if(this.columns[t].template!=undefined&&this.columns[t].template!=null&&typeof this.columns[t].template!="function"&&this.columns[t].field!=undefined&&this.columns[t].field!=null&&this.columns[t].field!=="")for(f=kendo.template(this.columns[t].template.replace(/<\s*\w.*?>/g,"").replace(/<\s*\/\s*\w\s*.*?>|<\s*br\s*>/g,"")),console.log("template",this.columns[t].template.replace(/<\s*\w.*?>/g,"").replace(/<\s*\/\s*\w\s*.*?>|<\s*br\s*>/g,"")),delete r.columns[t].width,r.columns[t].autoWidth=!0,i=0;i<r.rows.length;i++)u=r.rows[i],i===0?this.columns[t].headerTemplate!=undefined&&this.columns[t].headerTemplate!=null&&this.columns[t].headerTemplate!==""&&(u.cells[t].value=this.columns[t].headerTemplate.replace(/<\s*\w.*?>/g,"").replace(/<\s*\/\s*\w\s*.*?>|<\s*br\s*>/g,"")):u.cells[t].value=f(n.data[i-1]);else this.columns[t].field==undefined||this.columns[t].field==null||this.columns[t].field===""},this.toolbar=[],this.editable=n.editable,$.type(n.pageable)==="boolean"&&(this.pageable=n.pageable),$.type(n.navigatable)==="boolean"&&(this.navigatable=n.navigatable),$.type(n.selectable)==="boolean"&&(this.selectable=n.selectable),$.type(n.pageable)==="object")for(o in n.pageable)this.pageable[o]=n.pageable[o];if($.type(n.toolbar)==="array")for(r={name:"create",text:"Add Record"},c={name:"excel",text:"Export"},u=0;u<n.toolbar.length;u++)if(t=n.toolbar[u],$.type(t)==="string")switch(t){case"search":this.toolbar.push({name:"grdSearch",template:'<input grd-search="" placeholder="Search keyword" />'});break;case"create":this.toolbar.push(r);break;case"excel":this.toolbar.push(c);break;case"template":this.toolbar.push({name:"downloadTemplate",template:"<div download-template><\/div>"});break;case"upload":this.toolbar.push({name:"uploadTemplate",template:'<button batch-upload action="Insert"><\/button>'})}else if(t.name!==undefined)switch(t.name){case"create":this.toolbar.push({name:r.name,text:t.text!==""&&t.text!=null?t.text:r.text});break;case"search":this.toolbar.push({name:"grdSearch",template:'<input grd-search="" placeholder="Search keyword" />'});break;case"upload":var s=t.batchType,l=t.batchAction||"Insert",a=!0,v=t.noTemplate||!1;t.action!==undefined&&t.action!==null&&(t.action.trim().toLowerCase()==="insert"||t.action.trim().toLowerCase()==="update")&&(l=t.action.trim());f={"batch-upload":"",action:l,"no-template":v};t.waitBatch!==undefined&&t.waitBatch!==null&&(a=t.waitBatch);s!==undefined&&s!==null&&(f["batch-type"]=s,f["wait-batch"]=a);this.toolbar.push({name:"uploadTemplate",template:$("<button />").attr(f).prop("outerHTML")});break;case"template":this.toolbar.push({name:"downloadTemplate",template:"<div download-template "+(t.controller!==undefined&&t.controller!==null&&t.controller!==""?'ctrl="'+t.controller+'"':"")+' level="'+t.level+'"><\/div>'});break;default:this.toolbar.push(t)}n.autoBind!==undefined&&(this.autoBind=n.autoBind);this.edit=n.editable==="inline"?function(t){var f=t.container.find("td:nth-last-child(2)"),r,u,e;console.log("grid edit e",t);r=$('<a class="k-button k-grid-update"><i class="material-icons">check<\/i ><\/a>');t.sender.editable.validatable=new recruitment.CValidator(t.container);t.sender.unbind("save");t.sender.bind("save",function(u){u.preventDefault();i.disable(r);var f=$.Deferred();$.when(t.sender.dataSource.sync()).done(function(){i.enable(r);n.save!=null&&n.save!==undefined?$.type(n.save)==="function"&&n.save(t.model):n.update!=null&&n.update!==undefined&&$.type(n.update)==="function"&&n.update(t.model)},function(){i.enable(r)});n.save!==undefined&&n.save()});f.empty();f.append(r);u=t.container.find("td:last");u.empty();e=$('<a class="k-button k-grid-cancel" ><i class="material-icons">close<\/i><\/span><\/a>');u.append(e);h(t,r)}:function(t){var r=null,u;n.editable!=null&&n.editable!=undefined&&n.editable.window!=null&&n.editable.window!=undefined&&(n.editable.window.title!=undefined&&(r=n.editable.window.title),u="",t.model.isNew()?(t.container.data("kendoWindow").title(r!=null?r:"Add New Entry"),$("a.k-grid-update")[0].innerHTML="<span class='k-icon k-i-check'><\/span>Save",u="created"):(t.container.data("kendoWindow").title("Update "+(r!=null?r:"Entry")),$("a.k-grid-update")[0].innerHTML="<span class='k-icon k-i-check'><\/span>Update",u="updated"));t.sender.editable.validatable=new recruitment.CValidator(t.container);t.sender.unbind("save");t.sender.bind("save",function(r){r.preventDefault();n.customSaveChanges!=undefined&&n.customSaveChanges!=null?($.type(n.customSaveChanges)==="function"&&n.customSaveChanges(r),$.when(t.sender.dataSource.read()).then(function(){i.disable($("a.k-grid-update"));console.log("success @ when")},function(){i.enable($("a.k-grid-update"));console.log("failed @ when")})):(i.disable($("a.k-grid-update")),$.when(t.sender.dataSource.sync()).then(function(){i.enable($("a.k-grid-update"));console.log("success @ when");n.save!=null&&n.save!==undefined?$.type(n.save)==="function"&&(n.save(t.model),console.log("e.model save",t.model)):n.update!=null&&n.update!==undefined&&$.type(n.update)==="function"&&(n.update(t.model),console.log("e.model updated",t.model))},function(){i.enable($("a.k-grid-update"));console.log("failed @ when")}))});h(t)};this.dataSource=new recruitment.CDataSource(n.dataSource);n.columns!==undefined&&(this.columns=n.columns)}this.prepareForm=function(n,t){h(n,t)};i={disable:function(n){$(n).addClass("k-state-disabled");$(n).css({"pointer-events":"none"})},enable:function(n){$(n).removeClass("k-state-disabled");$(n).css({"pointer-events":""})}};this.dataBound=function(n,t){var r,u,i;t=typeof t!="undefined"?t:!0;t&&(r=n.sender.element.find("tbody tr .k-grid-edit"),u=n.sender.element.find("tbody tr .k-grid-delete"),r.each(function(){var t=n.sender.dataItem($(this).closest("tr"));t.CanUpdate!==undefined&&(t.CanUpdate||$(this).replaceWith('<span class="k-icon k-i-lock" style="position:relative; left: 8px;"><\/span>'))}),u.each(function(){var t=n.sender.dataItem($(this).closest("tr"));t.CanDelete!==undefined&&(t.CanDelete||$(this).replaceWith('<span class="k-icon k-i-lock" style="position:relative; left: 8px;"><\/span>'))}));this.dataSource.view().length===0&&(i=this.dataSource.page(),i>1&&this.dataSource.page(i-1))}}recruitment.CGrid=n}(recruitment),function(){app.directive("editorFileUpload",["$compile",function(){return{restrict:"A",scope:{fileAttachments:"=",id:"@",path:"@",unit:"@"},replace:!0,template:'<input name="files" type="file" title="Insert file" accept=".doc,.docx,.xls,.xlsx,.png,.jpeg,.pdf" />',controler:["$scope",function(){}],link:function(n,t,i){var r=null,u;$(t).kendoUpload({async:{saveUrl:recruitmentConfig.VirtualPath+"/recruitment/SaveUpload",autoUpload:!0,batch:!0},upload:function(t){u=recruitment.preloader.show("Attaching file");i.dependencyButton!=null&&i.dependencyButton!=undefined&&i.dependencyButton!==""&&(console.log('[for-editor-file-upload="'+i.dependencyButton+'"]'),$('[for-editor-file-upload="'+i.dependencyButton+'"]').addClass("button is-loading"));t.data={clearanceReqId:parseInt(n.id),LPath:n.path,UnitID:n.unit}},validation:{allowedExtensions:[".pdf",".jpg",".jpeg",".png",".doc",".docx",".xls",".xlsx"]},success:function(t){var h=t.response[0],o,e,s,f;console.log("this",$(this.element));console.log("parents",$(this.element).parents("table[class='k-widget k-editor k-header k-editor-widget']"));i.fileAttachments!=null&&i.fileAttachments!=undefined&&i.fileAttachments!==""&&n.fileAttachments.push(h.UID);r==null&&(r=$(this.element).parents("table[class='k-widget k-editor k-header k-editor-widget']").find("textarea[kendo-editor]").data("kendoEditor"));o=[];for(f in t.response)o.push(t.response[f].FileID),r.exec("inserthtml",{value:'<a href="'+recruitmentConfig.VirtualPath+"/recruitment/DownloadFile?id="+t.response[f].FileID+'">'+t.response[f].C_Name+"<\/a> "});if(e=o,sessionStorage.getItem("bindFileID").length<=0)sessionStorage.setItem("bindFileID",JSON.stringify(e));else{s=JSON.parse(sessionStorage.getItem("bindFileID"));for(f in e)s.push(e[f]);sessionStorage.setItem("bindFileID",JSON.stringify(s))}console.log(sessionStorage.getItem("bindFileID"));recruitment.preloader.hide(u);i.dependencyButton!=null&&i.dependencyButton!=undefined&&i.dependencyButton!==""&&$('[for-editor-file-upload="'+i.dependencyButton+'"]').removeClass("button is-loading")},localization:{select:""}});$(t).next("span").addClass("k-tool-icon k-icon k-i-file-add");$(t).parents("div.k-dropzone").css("padding","0");$(t).parent("div.k-upload-button").css("background","#f2f2f2").css("box-shadow","none").css("border","0").css("cursor","pointer").hover(function(){$(this).css("color","#444").css("border-color","#ebebeb").css("background-color","#ebebeb").css("cursor","pointer")},function(){$(this).css("color","").css("border-color","").css("background","#f2f2f2").css("cursor","pointer")});$(t).parents("div.k-upload").css("border","0")}}}])}(recruitment);